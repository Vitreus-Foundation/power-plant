image: rust:1.71
clone:
  depth: full 

pipelines:
  pull-requests:
    fix/*:
      - step:
          name: Build from fix/* branch pull request
          size: 4x
          script:
            - rustup target add wasm32-unknown-unknown
            - export RUSTFLAGS="-C strip=debuginfo"
            - apt-get update && apt-get install -y cmake build-essential clang libclang-dev protobuf-compiler pkg-config libssl-dev libpq-dev gcc llvm jq 
            - cargo fmt -- --check
            - cargo clippy -- -D warnings
            - cargo build --locked
            - cargo test -j 2 --workspace --locked
#            - cargo test -j 2 --workspace --features "runtime-benchmarks" --locked

    feature/*:
      - step:
          name: Build from feature/* branch pull request
          size: 4x
          script:
            - rustup target add wasm32-unknown-unknown
            - export RUSTFLAGS="-C strip=debuginfo"
            - apt-get update && apt-get install -y cmake build-essential clang libclang-dev protobuf-compiler pkg-config libssl-dev libpq-dev gcc llvm jq 
            - cargo fmt -- --check
            - cargo clippy -- -D warnings
            - cargo build --locked
            - cargo test -j 2 --workspace --locked
#            - cargo test -j 2 --workspace --features "runtime-benchmarks" --locked

    devops/*:
      - step:
          name: Build from devops/* branch pull request
          size: 4x
          script:
            - rustup target add wasm32-unknown-unknown
            - export RUSTFLAGS="-C strip=debuginfo"
            - apt-get update && apt-get install -y cmake build-essential clang libclang-dev protobuf-compiler pkg-config libssl-dev libpq-dev gcc llvm jq 
            - cargo fmt -- --check
            - cargo clippy -- -D warnings
            - cargo build --locked
            - cargo test -j 2 --workspace --locked
#            - cargo test -j 2 --workspace --features "runtime-benchmarks" --locked

  custom:
    run-test-1:
      - step:
          name: Run tests Stage 1
          size: 4x
          script:
            - echo "Running tests Stage 1"
            - rustup target add wasm32-unknown-unknown
            - export RUSTFLAGS="-C strip=debuginfo"
            - apt-get update && apt-get install -y cmake build-essential clang libclang-dev protobuf-compiler pkg-config libssl-dev libpq-dev gcc llvm jq 
            - cargo test -j 2 --workspace --locked

  branches:   
    develop:
      - step:
          name: First step
          script:
            - echo "Hello"

      - parallel:
          steps:
            - step:
                name: Build and Run Tests
                size: 4x
                script:
                  - rustup target add wasm32-unknown-unknown
                  - export RUSTFLAGS="-C strip=debuginfo"
                  - apt-get update && apt-get install -y cmake build-essential clang libclang-dev protobuf-compiler pkg-config libssl-dev libpq-dev gcc llvm jq 
                  - cargo fmt -- --check
                  - cargo clippy -- -D warnings
                  - cargo build --features "fast-runtime" --locked
                  - cargo test -j 2 --workspace --locked

    stagenet:
      - step:
          name: First step
          script:
            - echo "Hello"

      - parallel:
          steps:
            - step:
                name: Build and Run Tests
                size: 4x
                script:
                  - rustup target add wasm32-unknown-unknown
                  - export RUSTFLAGS="-C strip=debuginfo"
                  - apt-get update && apt-get install -y cmake build-essential clang libclang-dev protobuf-compiler pkg-config libssl-dev libpq-dev gcc llvm jq 
                  - cargo fmt -- --check
                  - cargo clippy -- -D warnings
                  - cargo build --locked
                  - cargo test -j 2 --workspace --locked

            - step:
                name: inno STAGEnet bootnode
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: stage-bootnode
                script:
                  - ssh ${USERNAME}@${HOST1} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOST1} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose-boot-${ENV}.yml down && docker system prune -a -f || true && docker compose -f ./dev-ops/compose-boot-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOST1} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep boot-node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Stage Boot Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep boot-node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Stage Boot Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"

            - step:
                name: inno STAGEnet node1
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: stage-node-1
                script:
                  - ssh ${USERNAME}@${HOST2} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOST2} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose-val-1-${ENV}.yml down && docker system prune -a -f || true && docker compose -f ./dev-ops/compose-val-1-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOST2} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep first-node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Stage First Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep first-node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Stage First Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"

            - step:
                name: inno STAGEnet archive
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: stage-archive
                script:
                  - ssh ${USERNAME}@${HOSTARCHIVE} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOSTARCHIVE} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose-archive-1-${ENV}.yml down && docker system prune -a -f || true && docker compose -f ./dev-ops/compose-archive-1-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOSTARCHIVE} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep archive-node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Stage Archive Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep archive-node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Stage Archive Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"

    testnet:
      - step:
          name: First step
          script:
            - echo "Hello"
#           name: Build and Run Tests
#           size: 2x
#           script:
#             - rustup target add wasm32-unknown-unknown
#             - export RUSTFLAGS="-C strip=debuginfo"
#             - apt-get update && apt-get install -y cmake build-essential clang libclang-dev protobuf-compiler pkg-config libssl-dev libpq-dev gcc llvm jq 
#             - cargo build --locked
#             - cargo test -j 4 --workspace --locked
# #            - cargo test -j 4 --workspace --locked -- --include-ignored
#             - cargo fmt -- --check
#             - cargo clippy -- -D warnings

      - parallel:
          steps:
            - step:
                name: Build and Run Tests
                size: 4x
                trigger: manual
                script:
                  - rustup target add wasm32-unknown-unknown
                  - export RUSTFLAGS="-C strip=debuginfo"
                  - apt-get update && apt-get install -y cmake build-essential clang libclang-dev protobuf-compiler pkg-config libssl-dev libpq-dev gcc llvm jq 
                  - cargo build --locked
                  - cargo test -j 2 --workspace --locked
#                  - cargo test -j 2 --workspace --features "runtime-benchmarks" --locked
                  - cargo fmt -- --check
                  - cargo clippy -- -D warnings

            - step:
                name: inno testnet bootnode
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: testnet-bootnode
                script:
                  - ssh ${USERNAME}@${HOST1} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOST1} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose-boot-${ENV}.yml down && docker image prune -a -f || true && docker compose -f ./dev-ops/compose-boot-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOST1} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep boot-node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Testnet Boot Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep boot-node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Innowise Testnet Boot Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"

            - step:
                name: inno testnet archive
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: testnet-archive
                script:
                  - ssh ${USERNAME}@${HOSTARCHIVE} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOSTARCHIVE} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose-archive-${ENV}.yml down && docker image prune -a -f || true && docker compose -f ./dev-ops/compose-archive-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOSTARCHIVE} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep archive-node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Testnet Archive Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep archive-node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Innowise Testnet Archive Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"

            - step:
                name: inno testnet archive-2
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: testnet-archive-2
                script:
                  - ssh ${USERNAME}@${HOSTARCHIVE2} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOSTARCHIVE2} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose-archive-2-${ENV}.yml down && docker image prune -a -f || true && docker compose -f ./dev-ops/compose-archive-2-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOSTARCHIVE} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep archive-node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Testnet Second Archive Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep archive-node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Innowise Testnet Second Archive Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"

            - step:
                name: inno testnet node1
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: testnet2
                script:
                  - ssh ${USERNAME}@${HOST2} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOST2} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose1-${ENV}.yml down && docker image prune -a -f || true && docker compose -f ./dev-ops/compose1-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOST2} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep first-node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Testnet First Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep first-node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Innowise Testnet First Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"

            - step:
                name: inno testnet node2
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: testnet3
                script:
                  - ssh ${USERNAME}@${HOST3} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOST3} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose2-${ENV}.yml down && docker image prune -a -f || true && docker compose -f ./dev-ops/compose2-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOST3} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep second-node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Testnet Second Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep second-node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Innowise Testnet Second Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"
                  
            - step:
                name: inno testnet node3
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: testnet4
                script:
                  - ssh ${USERNAME}@${HOST4} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOST4} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose3-${ENV}.yml down && docker image prune -a -f || true && docker compose -f ./dev-ops/compose3-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOST4} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep third_node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Testnet Third Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep third_node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Innowise Testnet Third Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"
                  
            - step:
                name: inno testnet node4
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: testnet5
                script:
                  - ssh ${USERNAME}@${HOST5} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOST5} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose4-${ENV}.yml down && docker image prune -a -f || true && docker compose -f ./dev-ops/compose4-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOST5} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep fourth_node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Testnet Fourth Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep fourth_node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Innowise Testnet Fourth Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"
                  
            - step:
                name: inno testnet node5
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: testnet6
                script:
                  - ssh ${USERNAME}@${HOST6} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOST6} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose5-${ENV}.yml down && docker image prune -a -f || true && docker compose -f ./dev-ops/compose5-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOST6} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep fifth_node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Testnet Fifth Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep fifth_node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Innowise Testnet Fifth Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"
                             
            - step:
                name: inno testnet node6
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: testnet7
                script:
                  - ssh ${USERNAME}@${HOST7} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOST7} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose6-${ENV}.yml down && docker image prune -a -f || true && docker compose -f ./dev-ops/compose6-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOST6} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep fifth_node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Testnet Fifth Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep fifth_node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Innowise Testnet Fifth Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"

            - step:
                name: inno testnet node7
                image: leojonathanoh/docker-kubectl:envsubst-git-jq-kustomize-ssh-v1.14.4
                trigger: manual
                deployment: testnet8
                script:
                  - ssh ${USERNAME}@${HOST8} "cd /vitreus/${PRJNAME} && git pull && git checkout ${ENV} && git log | head"
                  - ssh ${USERNAME}@${HOST8} "cd /vitreus/${PRJNAME} && docker compose -f ./dev-ops/compose7-${ENV}.yml down && docker image prune -a -f || true && docker compose -f ./dev-ops/compose7-${ENV}.yml up -d"
#                  - ssh ${USERNAME}@${HOST6} "sleep 30 && export GOOGLE_CHAT_WEBHOOK_TOKEN=${GOOGLE_CHAT_WEBHOOK_TOKEN} && docker ps | grep fifth_node && curl -H 'Content-Type:application/json' -d '{\"text\":\"Innowise Testnet Fifth Node is up and running\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}' ; docker ps | grep fifth_node || curl -H 'Content-Type:application/json' -d '{\"text\":\"Issues with Innowise Testnet Fifth Node\"}' 'https://chat.googleapis.com/v1/spaces/AAAAECMvV34/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=${GOOGLE_CHAT_WEBHOOK_TOKEN}'"
  